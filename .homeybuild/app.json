{
  "_comment": "This file is generated. Please edit .homeycompose/app.json instead.",
  "id": "com.mats.the.best.btlight",
  "version": "1.1.0",
  "sdk": 3,
  "compose": true,
  "compatibility": ">=5.0.0",
  "name": {
    "en": "BtLight",
    "sv": "BtLight"
  },
  "description": {
    "en": "BLE LED strip with MAC-locked connection, GATT validation and frame-based RGB control",
    "sv": "BLE LED-list med MAC-låst anslutning, GATT-validering och frame-baserad RGB-styrning"
  },
  "category": "lights",
  "brandColor": "#00AEEF",
  "author": "Mats / mschyllander",
  "permissions": [
    "homey:wireless:ble"
  ],
  "images": {
    "small": "/assets/images/small.png",
    "large": "/assets/images/large.png"
  },
  "drivers": [
    {
      "name": {
        "en": "uac088 Light",
        "sv": "uac088 Lampa"
      },
      "id": "btlight",
      "class": "light",
      "capabilities": [
        "onoff",
        "dim",
        "light_hue",
        "light_saturation",
        "alarm_connection",
        "measure_rssi",
        "signal_quality"
      ],
      "capabilitiesOptions": {
        "measure_rssi": {
          "title": {
            "sv": "Signalstyrka",
            "en": "Signal strength"
          },
          "units": {
            "sv": "dBm",
            "en": "dBm"
          },
          "decimals": 0
        },
        "alarm_connection": {
          "title": {
            "sv": "Anslutningslarm",
            "en": "Connection alarm"
          }
        },
        "signal_quality": {
          "title": {
            "sv": "Signalkvalitet",
            "en": "Signal quality"
          }
        }
      },
      "images": {
        "small": "/drivers/btlight/assets/small.png",
        "large": "/drivers/btlight/assets/large.png"
      },
      "settings": [
        {
          "id": "service_uuid",
          "type": "text",
          "label": {
            "en": "Service UUID",
            "sv": "Service-UUID"
          },
          "hint": {
            "en": "16-bit (e.g. ffb0/ffe0) or full 128-bit UUID. Leave blank for autodetect.",
            "sv": "16-bit (t.ex. ffb0/ffe0) eller full 128-bit UUID. Lämna tomt för autodetektering."
          },
          "value": ""
        },
        {
          "id": "char_uuid",
          "type": "text",
          "label": {
            "en": "Write Characteristic UUID",
            "sv": "Write-karaktäristik UUID"
          },
          "hint": {
            "en": "16-bit (e.g. ffb1/ffe1) or full 128-bit UUID. Leave blank for autodetect.",
            "sv": "16-bit (t.ex. ffb1/ffe1) eller full 128-bit UUID. Lämna tomt för autodetektering."
          },
          "value": ""
        },
        {
          "id": "rssi_min",
          "type": "number",
          "label": {
            "en": "Minimum RSSI (dBm)",
            "sv": "Minsta RSSI (dBm)"
          },
          "value": -85,
          "min": -100,
          "max": -40,
          "step": 1
        },
        {
          "id": "connect_min_rssi",
          "type": "number",
          "label": {
            "en": "Min RSSI for connect (dBm)",
            "sv": "Min RSSI för anslutning (dBm)"
          },
          "hint": {
            "en": "Skip connection attempts while advertised RSSI is below this.",
            "sv": "Hoppa över anslutningsförsök när annonserad RSSI är lägre än detta."
          },
          "value": -85,
          "min": -100,
          "max": -40,
          "step": 1
        },
        {
          "id": "metrics_interval_s",
          "type": "number",
          "label": {
            "en": "Metrics poll interval (s)",
            "sv": "Mätintervall (s)"
          },
          "hint": {
            "en": "How often to refresh RSSI/indicators.",
            "sv": "Hur ofta RSSI/indikatorer uppdateras."
          },
          "value": 60,
          "min": 15,
          "max": 600,
          "step": 5
        },
        {
          "id": "use_frame_dim",
          "type": "checkbox",
          "label": {
            "en": "Use frame-based dim",
            "sv": "Använd frame-dim"
          },
          "value": true
        },
        {
          "id": "led_triplets",
          "type": "number",
          "label": {
            "en": "Triplets per frame",
            "sv": "Triplets per frame"
          },
          "value": 60,
          "min": 1,
          "max": 512,
          "step": 1
        },
        {
          "id": "preset_red",
          "type": "text",
          "label": {
            "en": "Preset RED (hex)",
            "sv": "Preset RÖD (hex)"
          },
          "value": "0AA5000400001432FF000032FF000032FF000032FF000032FF000032FF000032FF000032FF000032FF000032FF000032FF000032FF000032FF000032FF000032FF000032FF000032FF000032FF000032FF0000"
        },
        {
          "id": "preset_green",
          "type": "text",
          "label": {
            "en": "Preset GREEN (hex)",
            "sv": "Preset GRÖN (hex)"
          },
          "value": "0AA500040000143200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF003200FF00"
        },
        {
          "id": "preset_blue",
          "type": "text",
          "label": {
            "en": "Preset BLUE (hex)",
            "sv": "Preset BLÅ (hex)"
          },
          "value": "0AA50004000014320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF320000FF"
        },
        {
          "id": "custom_hex",
          "type": "text",
          "label": {
            "en": "Custom HEX (manual test)",
            "sv": "Egen HEX (manuell test)"
          },
          "value": ""
        }
      ],
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          },
          "options": {
            "singular": false
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ]
    }
  ],
  "capabilities": {
    "alarm_connection": {
      "type": "boolean",
      "title": {
        "en": "Connection alarm",
        "sv": "Anslutningslarm"
      },
      "desc": {
        "en": "True when device is not reachable",
        "sv": "Sann när enheten inte kan nås"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/connection.svg"
    },
    "measure_rssi": {
      "type": "number",
      "title": {
        "en": "Signal strength",
        "sv": "Signalstyrka"
      },
      "desc": {
        "en": "Bluetooth RSSI",
        "sv": "Bluetooth RSSI"
      },
      "units": {
        "en": "dBm",
        "sv": "dBm"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "min": -120,
      "max": 0,
      "decimals": 0,
      "icon": "/assets/rssi.svg"
    },
    "signal_quality": {
      "type": "enum",
      "title": {
        "en": "Signal quality",
        "sv": "Signalkvalitet"
      },
      "desc": {
        "en": "Connection quality derived from RSSI",
        "sv": "L�nkkvalitet ber�knad fr�n RSSI"
      },
      "values": [
        {
          "id": "bad",
          "title": {
            "en": "Bad",
            "sv": "D�lig"
          }
        },
        {
          "id": "ok",
          "title": {
            "en": "OK",
            "sv": "OK"
          }
        },
        {
          "id": "good",
          "title": {
            "en": "Good",
            "sv": "Bra"
          }
        }
      ],
      "getable": true,
      "setable": false,
      "uiComponent": "ternary",
      "icon": "/assets/connection.svg"
    }
  }
}